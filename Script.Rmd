---
title: "Script"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tabulizer)
library(dplyr)
library(stringr)
```

## Obtener datos desde el PDF
```{r}
pages<-extract_tables("C01-Importación-de-combustibles-VOLUMEN-2020-03.pdf") #PDF con datos actualizados
datosImp <- do.call(rbind, pages)
nombresVar<-datosImp[1,]
datosImp<-as.data.frame(datosImp[2:nrow(datosImp),])
nombresVar[c(1,4,5,6,8,10,11,15,16,21,23,24)]<-c("Anio","GasAviacion","GasSuperior","GasRegular","rTurboJet","DieselLS","DieselULS","AceitesLub","GrasasLub","PetroleoReconst","Orimulsion","MezclasOleosas")
names(datosImp)<-nombresVar
```

```{r}
#Leer
dataSet = read.csv("datos.csv",stringsAsFactors = FALSE, na.strings = TRUE, strip.white = TRUE,sep = ",", encoding="UTF-8" )

```

```{r}
#Seleccionar
dataset = dataSet[c(1,2,5,6, 9,10)]
dataset = dataset[-c(46, 96, 146, 196),]
```

```{r}
#Limpiar
dataset$Diesel[dataset$Diesel =="-"] <- 0
dataset$DieselLS[dataset$DieselLS =="-"] <- 0
dataset2 = dataset
```

```{r}
#COnvertir
options(digits=9)
dataset2$Anio = as.numeric(dataset2$Anio)
dataset2$Mes = as.numeric(dataset2$Mes)
dataset2$GasSuperior = as.numeric(gsub(",", "", dataset2$GasSuperior))
dataset2$GasRegular = as.numeric(gsub(",", "", dataset2$GasRegular))
dataset2$Diesel = as.numeric(gsub(",", "", dataset2$Diesel))
dataset2$DieselLS = as.numeric(gsub(",", "", dataset2$DieselLS))
#Unir Diesel
dataset2$Diesel = dataset2$Diesel + dataset2$DieselLS
dataset2 = dataset2[-6]
dataSet = dataset2
```

```{r}
View(dataSet)
```

### Clasifición de las variables

##ANIO

Año del índice

Variable categórica ordinal

##Mes

Mes del índice

Variable categórica ordinal

##GasSuperior

Volumen de importación gasolina superior

Variable cuantitativa continua

```{r}
qqnorm(dataSet$GasSuperior, main = "Distribucion normal de $GasSuperior")
qqline(dataSet$GasSuperior)
```

Por la gráfica anterior podemos afirmar que la varaible cuenta con una distribución normal. 

##GasRegular

Volumen de importación gasolina regular

Variable cuantitativa continua

```{r}
qqnorm(dataSet$GasSuperior, main = "Distribucion normal de $GasRegular")
qqline(dataSet$GasSuperior)
```

Por la gráfica anterior podemos afirmar que la varaible cuenta con una distribución normal. 

##Diesel

Volumen de importación diesel

Variable cuantitativa continua

```{r}
qqnorm(dataSet$GasSuperior, main = "Distribucion normal de $Diesel")
qqline(dataSet$GasSuperior)
```

Por la gráfica anterior podemos afirmar que la varaible cuenta con una distribución normal. 

```{r}
install.packages('dplyr')
```


```{r}
library(dplyr)
```

```{r}
View(dataSet)
```


```{r}
library(ggplot2)
# Step 1
datagraph <- dataSet %>% 
group_by(Mes) %>% 
summarise(Volumen_Diesel = n(Diesel))  #Step 4

#ggplot(aes(x = Mes, y = Diesel, fill = Mes)) +
#    geom_bar(stat = "identity") +
#    theme_classic() +
#    labs(
#        x = "Mes",
#        y = "Diesel",
#        title = paste(
#            "Importación de Diesel por mes"
#        )
#    )
```

